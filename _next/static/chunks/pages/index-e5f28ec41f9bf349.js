(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6471)}])},6471:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return ee}});var t,r,s,o,i=n(2322),l=n(2784),d=n(4821),h=n(3741),u=n(2033);(t=s||(s={}))[t.ChangeMode=0]="ChangeMode",t[t.ChangePowerThreshold=1]="ChangePowerThreshold",t[t.ChangePowerNormalized=2]="ChangePowerNormalized",t[t.ChangePaceThreshold=3]="ChangePaceThreshold",t[t.ChangePaceNormalized=4]="ChangePaceNormalized",t[t.ChangeHeartRateMaximum=5]="ChangeHeartRateMaximum",t[t.ChangeHeartRateAverage=6]="ChangeHeartRateAverage",t[t.ChangeDurationInMinutes=7]="ChangeDurationInMinutes";let c=e=>e.type===s.ChangeMode,m=e=>e.type===s.ChangeDurationInMinutes,g=e=>e/106*100,p=(e,a)=>{let n=a/g(e);return isFinite(n)?n:0},x=(e,a,n)=>{let t=n*a*p(e,a)/(60*g(e))*100,r=Math.round(t);return isFinite(r)?r:0},j=(e,a)=>{let n={...e.heartRate};switch(a.type){case s.ChangeHeartRateMaximum:n.maximumInBpm=a.payload;break;case s.ChangeHeartRateAverage:n.averageInBpm=a.payload}return{...e,heartRate:n,intensityFactor:p(+n.maximumInBpm||0,+n.averageInBpm||0),trainingStressScore:x(+n.maximumInBpm||0,+n.averageInBpm||0,+e.durationInMinutes||0)}},I=(e,a)=>{let n=e/a;return isFinite(n)?n:0},C=(e,a,n)=>{let t=n*e*I(e,a)/(60*a)*100,r=Math.round(t);return isFinite(r)?r:0};var y=n(2839),P=n(9452),v=n(7237),w=n(9034),S=n.n(w);let b=()=>S()(0),M=e=>{if(!e||!e.isValid())return e;let a=e.seconds()+60*e.minutes();return b().add(a,"seconds")},Z=e=>e&&e.isValid()?(0,w.duration)(e.diff(b())).asSeconds():0,z=e=>{let{value:a,onChange:n,...t}=e,r=e=>(0,i.jsx)(y.Z,{fullWidth:!0,InputLabelProps:{shrink:!0},...e});return(0,i.jsx)(P.Z,{sx:{marginBottom:3},children:(0,i.jsx)(v.j,{ampm:!1,openTo:"minutes",views:["minutes","seconds"],inputFormat:"mm:ss",mask:"__:__",value:a,onChange:e=>n(M(e)),renderInput:r,...t})})},R=(e,a)=>{let n={...e.pace};switch(a.type){case s.ChangePaceThreshold:n.thresholdInSeconds=a.payload;break;case s.ChangePaceNormalized:n.normalizedInSeconds=a.payload}return{...e,pace:n,intensityFactor:I(Z(n.thresholdInSeconds),Z(n.normalizedInSeconds)),trainingStressScore:C(Z(n.thresholdInSeconds),Z(n.normalizedInSeconds),+e.durationInMinutes||0)}},F=(e,a)=>{let n=a/e;return isFinite(n)?n:0},f=(e,a,n)=>{let t=n*a*F(e,a)/(60*e)*100,r=Math.round(t);return isFinite(r)?r:0},H=(e,a)=>{let n={...e.power};switch(a.type){case s.ChangePowerThreshold:n.thresholdInWatts=a.payload;break;case s.ChangePowerNormalized:n.normalizedInWatts=a.payload}return{...e,power:n,intensityFactor:F(+n.thresholdInWatts||0,+n.normalizedInWatts||0),trainingStressScore:f(+n.thresholdInWatts||0,+n.normalizedInWatts||0,+e.durationInMinutes||0)}};(r=o||(o={}))[r.Power=0]="Power",r[r.Pace=1]="Pace",r[r.HeartRate=2]="HeartRate";let _={mode:o.Pace,durationInMinutes:"",power:{thresholdInWatts:"",normalizedInWatts:""},pace:{thresholdInSeconds:null,normalizedInSeconds:null},heartRate:{maximumInBpm:"",averageInBpm:""},intensityFactor:0,trainingStressScore:0},N=(e,a)=>{let n={...e};c(a)&&(n.mode=a.payload),m(a)&&(n.durationInMinutes=a.payload);let t={[o.Power]:H,[o.Pace]:R,[o.HeartRate]:j};return t[n.mode](n,a)};var T=n(8771),B=n(1647);let W=e=>{let{state:a,dispatch:n}=e;return(0,i.jsxs)(T.Z,{exclusive:!0,"aria-label":"Mode",sx:{marginBottom:3},value:a.mode,onChange(e,a){n({type:s.ChangeMode,payload:+a})},children:[(0,i.jsx)(B.Z,{value:o.Power,children:"Power"}),(0,i.jsx)(B.Z,{value:o.Pace,children:"Pace"}),(0,i.jsx)(B.Z,{value:o.HeartRate,children:"Heart Rate"})]})};var k=n(7588);let A=e=>{let{adornment:a,...n}=e,t=a?{endAdornment:(0,i.jsx)(k.Z,{position:"end",children:a})}:null;return(0,i.jsx)(y.Z,{fullWidth:!0,type:"number",sx:{borderColor:"grey.100",marginBottom:3},InputProps:t,InputLabelProps:{shrink:!0},...n})},D=e=>{let{state:a,dispatch:n,isVisible:t}=e;return!1===t?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A,{label:"Maximum Heart Rate",adornment:"bpm",value:a.heartRate.maximumInBpm,onChange:e=>n({type:s.ChangeHeartRateMaximum,payload:e.target.value})}),(0,i.jsx)(A,{label:"Average Heart Rate",adornment:"bpm",value:a.heartRate.averageInBpm,onChange:e=>n({type:s.ChangeHeartRateAverage,payload:e.target.value})})]})},E=e=>{let{state:a,dispatch:n,isVisible:t}=e;return!1===t?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z,{label:"Functional Threshold Pace",value:a.pace.thresholdInSeconds,onChange:e=>n({type:s.ChangePaceThreshold,payload:e})}),(0,i.jsx)(z,{label:"Normalized Pace",value:a.pace.normalizedInSeconds,onChange:e=>n({type:s.ChangePaceNormalized,payload:e})})]})},V=e=>{let{state:a,dispatch:n,isVisible:t}=e;return!1===t?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A,{label:"Functional Threshold Power",adornment:"watts",value:a.power.thresholdInWatts,onChange:e=>n({type:s.ChangePowerThreshold,payload:e.target.value})}),(0,i.jsx)(A,{label:"Normalized Power",adornment:"watts",value:a.power.normalizedInWatts,onChange:e=>n({type:s.ChangePowerNormalized,payload:e.target.value})})]})},L=e=>{let{state:a,dispatch:n}=e;return(0,i.jsxs)(d.Z,{sx:{margin:2},children:[(0,i.jsx)(h.Z,{title:"Training Stress Score"}),(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(W,{state:a,dispatch:n}),(0,i.jsx)(A,{label:"Duration",adornment:"min",value:a.durationInMinutes,onChange:e=>n({type:s.ChangeDurationInMinutes,payload:e.target.value})}),(0,i.jsx)(V,{state:a,dispatch:n,isVisible:a.mode===o.Power}),(0,i.jsx)(E,{state:a,dispatch:n,isVisible:a.mode===o.Pace}),(0,i.jsx)(D,{state:a,dispatch:n,isVisible:a.mode===o.HeartRate})]})]})};var O=n(1285),X=n(6898),q=n(9615),G=n(713),J=n(2924),K=n(4843);let Q=e=>{let{factor:a}=e;return(0,i.jsxs)(i.Fragment,{children:[Math.round(100*a),"%"]})},U=e=>{let{state:a}=e;return(0,i.jsx)(d.Z,{sx:{margin:2},children:(0,i.jsx)(u.Z,{children:(0,i.jsxs)(O.Z,{component:"table",children:[(0,i.jsx)(X.Z,{children:(0,i.jsxs)(q.Z,{children:[(0,i.jsx)(G.Z,{component:"th",align:"right",children:"Intensity Factor"}),(0,i.jsx)(G.Z,{component:"th",align:"right",children:"Training Stress Score"})]})}),(0,i.jsx)(J.Z,{children:(0,i.jsxs)(q.Z,{children:[(0,i.jsx)(G.Z,{align:"right",children:(0,i.jsx)(Q,{factor:a.intensityFactor})}),(0,i.jsx)(G.Z,{align:"right",sx:{bgcolor:"secondary.400"},children:(0,i.jsx)(K.Z,{sx:{fontSize:"1.5em",fontWeight:"bold"},children:a.trainingStressScore})})]})})]})})})},Y=()=>{let[e,a]=(0,l.useReducer)(N,_);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L,{state:e,dispatch:a}),(0,i.jsx)(U,{state:e})]})},$=()=>(0,i.jsx)(Y,{});var ee=$}},function(e){e.O(0,[331,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);